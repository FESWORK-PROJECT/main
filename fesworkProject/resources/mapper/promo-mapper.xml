<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="festivalMapper">

    <!-- ResultMap for FESTIVAL -->
    <resultMap id="promoResultSet" type="com.feswork.promo.model.vo.Festival">
        <result column="FESTIVAL_NO" property="festivalNo"/>
        <result column="MEM_ID" property="memId"/>
        <result column="LOCAL_CODE" property="localCode"/>
        <result column="FESTIVAL_NAME" property="festivalName"/>
        <result column="OPEN_DATE" property="openDate"/>
        <result column="CLOSE_DATE" property="closeDate"/>
        <result column="FES_LIKE" property="fesLike"/>
        <result column="FES_DESCRIPTION" property="fesDescription"/>
        <result column="FES_ADD" property="fesAdd"/>
        <result column="FES_IMAGE" property="fesImg"/>
    </resultMap>

    <select id="firstboard" resultMap="promoResultSet">
    	SELECT * FROM Festival
	</select>

	<insert id="insertBoard">
        INSERT INTO FESTIVAL (FESTIVAL_NO, FESTIVAL_NAME, MEM_ID, OPEN_DATE, CLOSE_DATE, FES_DESCRIPTION, FES_IMAGE)
        VALUES (SEQ_RV_NO.NEXTVAL, #{festivalName}, #{memId}, #{openDate}, #{closeDate}, #{fesDescription}, #{fesImg});
    </insert>

    <!-- SELECT Query for Specific Festival -->
    <select id="selectBoard" resultMap="promoResultSet">
        SELECT FESTIVAL_NO
             , FES_TITLE
             , MEM_ID
             , TO_CHAR(OPEN_DATE, 'YYYY-MM-DD') "OPEN_DATE"
             , TO_CHAR(CLOSE_DATE, 'YYYY-MM-DD') "CLOSE_DATE"
             , FES_DESCRIPTION
        FROM FESTIVAL
        WHERE FESTIVAL_NO = #{fes_No} AND STATUS = 'Y'
    </select>

</mapper>
